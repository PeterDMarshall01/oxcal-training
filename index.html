<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OxCal Training: Boundaries & Site Phasing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content-wrapper {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .navigation {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: #007bff;
            box-shadow: 0 4px 8px rgba(0,123,255,0.3);
        }

        .content-area {
            padding: 40px;
            min-height: 600px;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
        }

        .section h3 {
            color: #34495e;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }

        .concept-box {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            line-height: 1.5;
        }

        .interactive-exercise {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
        }

        .exercise-input {
            width: 100%;
            height: 150px;
            padding: 15px;
            border: none;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 15px 0;
            background: #2d3748;
            color: #e2e8f0;
        }

        .btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .result-box {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            display: none;
        }

        .example-scenario {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 8px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #007bff, #28a745);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .tips-box {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .tips-box h4 {
            color: #0066cc;
            margin-bottom: 10px;
        }

        ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>OxCal Training Module</h1>
            <p>Session 3: Boundaries & Site Phasing</p>
        </div>

        <div class="content-wrapper">
            <div class="navigation">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
                <div class="nav-buttons">
                    <button class="nav-btn active" onclick="showSection(0)">Introduction</button>
                    <button class="nav-btn" onclick="showSection(1)">Core Concepts</button>
                    <button class="nav-btn" onclick="showSection(2)">Boundary Types</button>
                    <button class="nav-btn" onclick="showSection(3)">Interactive Exercise</button>
                    <button class="nav-btn" onclick="showSection(4)">Advanced Functions</button>
                    <button class="nav-btn" onclick="showSection(5)">Troubleshooting</button>
                </div>
            </div>

            <div class="content-area">
                <!-- Section 1: Introduction -->
                <div class="section active" id="section-0">
                    <h2>üéØ What are Boundaries?</h2>
                    
                    <div class="concept-box">
                        <p><strong>Boundaries are mathematical constructs</strong> that estimate when archaeological phases begin and end. They're not radiocarbon dates themselves, but statistical estimates of transition points between different periods of activity.</p>
                    </div>

                    <h3>Why Use Boundaries?</h3>
                    <ul>
                        <li>Calculate when archaeological phases started and ended</li>
                        <li>Estimate the duration of different periods</li>
                        <li>Model transitions between cultural phases</li>
                        <li>Understand gaps in occupation</li>
                        <li>Create more precise site chronologies</li>
                    </ul>

                    <div class="example-scenario">
                        <h4>üèõÔ∏è Scenario: Roman Cemetery</h4>
                        <p>Imagine excavating a Romano-British cemetery with clear evidence for continuous burial activity:</p>
                        <ul>
                            <li><strong>Single Phase:</strong> Roman burial period (1st-5th centuries CE)</li>
                            <li><strong>Multiple burials:</strong> 13 radiocarbon dates from human bone collagen</li>
                            <li><strong>Potential outlier:</strong> One much later date possibly from post-Roman disturbance</li>
                        </ul>
                        <p>Boundaries help us estimate when the cemetery was first established, when burials ceased, and how long the burial period lasted.</p>
                    </div>
                </div>

                <!-- Section 2: Core Concepts -->
                <div class="section" id="section-1">
                    <h2>üß† Core Concepts</h2>
                    
                    <h3>Basic Boundary Syntax</h3>
                    <div class="code-block">
Boundary("Phase 1/2");
                    </div>
                    <p>This creates a transition point between Phase 1 and Phase 2, returning a probability distribution for when the change occurred.</p>

                    <h3>Essential Structure</h3>
                    <div class="code-block">
Sequence("Roman Cemetery"){
  Boundary("Start Cemetery Use");
  Phase("Roman Burials"){
    R_Date("SUERC-58710", 1649, 31);
    R_Date("SUERC-58711", 1748, 29);
    R_Date("SUERC-58712", 1855, 31);
    R_Date("SUERC-58713", 1759, 29);
    R_Date("SUERC-58717", 1874, 28);
    R_Date("BRAMS-4175", 1967, 27);
  };
  Boundary("End Cemetery Use");
  Span("Cemetery Duration");
};
                    </div>

                    <div class="concept-box">
                        <h4>Key Points:</h4>
                        <ul>
                            <li>Boundaries are placed <strong>between</strong> phases, not within them</li>
                            <li>Each boundary name should be unique and descriptive</li>
                            <li>The sequence must be chronologically ordered (oldest to youngest)</li>
                            <li>Boundaries constrain the radiocarbon dates within each phase</li>
                        </ul>
                    </div>

                    <h3>Understanding Boundary Output</h3>
                    <p>When OxCal processes boundaries, it produces:</p>
                    <ul>
                        <li><strong>Probability distributions</strong> showing the likely date range for transitions</li>
                        <li><strong>68.2% and 95.4% confidence intervals</strong> for boundary dates</li>
                        <li><strong>Agreement indices</strong> showing how well the model fits the data</li>
                    </ul>
                </div>

                <!-- Section 3: Boundary Types -->
                <div class="section" id="section-2">
                    <h2>üîß Types of Boundaries</h2>

                    <h3>Start() and End() Boundaries</h3>
                    <div class="concept-box">
                        <p><strong>Start() and End() boundaries</strong> estimate when phases began and ended. They're essential for calculating phase durations.</p>
                    </div>

                    <div class="code-block">
Sequence("Single Phase Site"){
  Boundary("Start Occupation");
  Phase("Main Occupation"){
    R_Date("Hearth-1", 3450, 30);
    R_Date("Hearth-2", 3420, 25);
    R_Date("Pit-1", 3400, 35);
  };
  Boundary("End Occupation");
};
                    </div>

                    <h3>Transition Boundaries</h3>
                    <p>Used between different archaeological phases:</p>
                    <div class="code-block">
Boundary("Early Bronze Age/Middle Bronze Age");
Boundary("Settlement/Abandonment");
Boundary("Pre-Roman/Roman");
                    </div>

                    <h3>Named vs Unnamed Boundaries</h3>
                    <ul>
                        <li><strong>Named boundaries:</strong> <span class="highlight">Boundary("Start Phase 1");</span> - appear in results</li>
                        <li><strong>Unnamed boundaries:</strong> <span class="highlight">Boundary();</span> - used for structure only</li>
                    </ul>

                    <div class="tips-box">
                        <h4>üí° Best Practices</h4>
                        <ul>
                            <li>Always use descriptive names for boundaries you want to analyze</li>
                            <li>Place Start/End boundaries at the beginning and end of each phase</li>
                            <li>Use consistent naming conventions across your models</li>
                            <li>Consider the archaeological meaning of each boundary</li>
                        </ul>
                    </div>
                </div>

                <!-- Section 4: Interactive Exercise -->
                <div class="section" id="section-3">
                    <h2>üéÆ Interactive Exercise</h2>
                    
                    <div class="example-scenario">
                        <h4>üìä Exercise: Roman Cemetery</h4>
                        <p><strong>Site:</strong> Romano-British cemetery with single burial phase</p>
                        <p><strong>Radiocarbon dates from human bone collagen:</strong></p>
                        <ul>
                            <li>SUERC-58710 (1649¬±31 BP), SUERC-58711 (1748¬±29 BP), SUERC-58712 (1855¬±31 BP)</li>
                            <li>SUERC-58713 (1759¬±29 BP), SUERC-58717 (1874¬±28 BP), SUERC-59634 (1664¬±29 BP)</li>
                            <li>SUERC-59806 (1713¬±27 BP), SUERC-61220 (1920¬±29 BP), SUERC-61221 (1927¬±29 BP)</li>
                            <li>BRAMS-4172 (1751¬±25 BP), BRAMS-4173 (1778¬±25 BP), BRAMS-4174 (1739¬±25 BP)</li>
                            <li>BRAMS-4175 (1967¬±27 BP) - <em>earliest burial</em></li>
                        </ul>
                        <p><em>Note: One date (SUERC-61222: 1100¬±27 BP) appears much later and may represent post-Roman activity</em></p>
                    </div>

                    <div class="interactive-exercise">
                        <h4>üéØ Your Task:</h4>
                        <p>Create an OxCal model for this Roman cemetery with appropriate Start and End boundaries. This is a single burial phase, so focus on estimating when the cemetery was first used and when burials ceased.</p>
                        
                        <textarea class="exercise-input" id="userCode" placeholder="Type your OxCal code here...

Hint: Start with:
Sequence('Roman Cemetery'){
  Boundary('Start Cemetery Use');
  Phase('Roman Burials'){
    // Add your R_Date() commands here
    // Don't forget the later date - it might be an outlier!
  };
  Boundary('End Cemetery Use');
  Span('Cemetery Duration');
};"></textarea>
                        
                        <button class="btn" onclick="checkExercise()">Check My Answer</button>
                        
                        <div class="result-box" id="feedback"></div>
                    </div>

                    <div class="tips-box">
                        <h4>üîç What to Look For:</h4>
                        <ul>
                            <li>Proper sequence structure</li>
                            <li>Named boundaries for all transitions</li>
                            <li>Correctly formatted R_Date() commands</li>
                            <li>Logical chronological order</li>
                        </ul>
                    </div>
                </div>

                <!-- Section 5: Advanced Functions -->
                <div class="section" id="section-4">
                    <h2>‚ö° Advanced Functions</h2>

                    <h3>Span() - Calculating Duration</h3>
                    <div class="concept-box">
                        <p><strong>Span()</strong> calculates how long a phase lasted. Place it after the relevant boundaries.</p>
                    </div>

                    <div class="code-block">
Sequence("Site Model"){
  Boundary("Start Phase 1");
  Phase("Phase 1"){
    R_Date("Sample-001", 4200, 30);
    R_Date("Sample-002", 4150, 25);
  };
  Boundary("End Phase 1");
  Span("Duration Phase 1");  // Calculates length of Phase 1
  
  Boundary("Start Phase 2");
  Phase("Phase 2"){
    R_Date("Sample-003", 3900, 35);
  };
  Boundary("End Phase 2");
  Span("Duration Phase 2");  // Calculates length of Phase 2
};
                    </div>

                    <h3>Interval() - Gaps Between Phases</h3>
                    <p><strong>Interval()</strong> calculates time between the end of one phase and start of the next:</p>

                    <div class="code-block">
Sequence("Site Model"){
  Boundary("End Phase 1");
  Interval("Gap Phase 1-2");  // Time between phases
  Boundary("Start Phase 2");
};
                    </div>

                    <h3>Practical Applications</h3>
                    <ul>
                        <li><strong>Settlement duration:</strong> How long was a site occupied?</li>
                        <li><strong>Cultural transitions:</strong> How quickly did change occur?</li>
                        <li><strong>Abandonment periods:</strong> How long was a site empty?</li>
                        <li><strong>Construction phases:</strong> How long did building take?</li>
                    </ul>

                    <div class="example-scenario">
                        <h4>üèóÔ∏è Example: Monument Construction</h4>
                        <div class="code-block">
Sequence("Stone Circle Construction"){
  Boundary("Start Construction");
  Phase("Foundation Phase"){
    R_Date("Foundation-1", 4800, 30);
    R_Date("Foundation-2", 4780, 25);
  };
  Boundary("Foundation/Stones");
  Span("Foundation Duration");
  
  Phase("Stone Erection"){
    R_Date("Stone-1", 4750, 30);
    R_Date("Stone-2", 4720, 35);
  };
  Boundary("End Construction");
  Span("Total Construction Time");
};
                        </div>
                    </div>
                </div>

                <!-- Section 6: Troubleshooting -->
                <div class="section" id="section-5">
                    <h2>üîß Troubleshooting Common Issues</h2>

                    <h3>Poor Agreement Indices</h3>
                    <div class="concept-box">
                        <p><strong>Agreement Index < 60%:</strong> Your model may be too restrictive or there may be issues with the dates.</p>
                    </div>

                    <h4>Common Causes:</h4>
                    <ul>
                        <li><strong>Outlier dates:</strong> One date doesn't fit the sequence</li>
                        <li><strong>Too many boundaries:</strong> Over-constraining the model</li>
                        <li><strong>Wrong stratigraphic order:</strong> Dates in wrong sequence</li>
                        <li><strong>Intrusive material:</strong> Contaminated samples</li>
                    </ul>

                    <h4>Solutions:</h4>
                    <ul>
                        <li>Check individual date agreements</li>
                        <li>Consider using <span class="highlight">Outlier()</span> functions</li>
                        <li>Review stratigraphic relationships</li>
                        <li>Simplify the model structure</li>
                    </ul>

                    <h3>Overlapping Phases</h3>
                    <p>Sometimes archaeological phases overlap rather than follow strict sequence:</p>
                    <div class="code-block">
// Instead of strict sequence, use:
Phase("Pottery Style A"){
  R_Date("Pot-1", 2800, 30);
  R_Date("Pot-2", 2750, 25);
};

Phase("Pottery Style B"){
  R_Date("Pot-3", 2780, 30);
  R_Date("Pot-4", 2720, 35);
};
                    </div>

                    <h3>When NOT to Use Boundaries</h3>
                    <ul>
                        <li>When phases are contemporary, not sequential</li>
                        <li>With very few dates (< 3 per phase)</li>
                        <li>When stratigraphic relationships are unclear</li>
                        <li>For isolated, unrelated dates</li>
                    </ul>

                    <div class="tips-box">
                        <h4>üéØ Final Tips</h4>
                        <ul>
                            <li>Start simple - add complexity gradually</li>
                            <li>Always check agreement indices</li>
                            <li>Visualize your results with plots</li>
                            <li>Document your model assumptions</li>
                            <li>Test alternative model structures</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSection = 0;
        const totalSections = 6;

        function showSection(sectionIndex) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Remove active class from all nav buttons
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => btn.classList.remove('active'));
            
            // Show selected section
            document.getElementById(`section-${sectionIndex}`).classList.add('active');
            navButtons[sectionIndex].classList.add('active');
            
            // Update progress bar
            const progress = ((sectionIndex + 1) / totalSections) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            
            currentSection = sectionIndex;
        }

        function checkExercise() {
            const userCode = document.getElementById('userCode').value.toLowerCase();
            const feedback = document.getElementById('feedback');
            
            let score = 0;
            let messages = [];
            
            // Check for key components
            if (userCode.includes('sequence')) {
                score += 20;
                messages.push('‚úÖ Good! You included a Sequence structure.');
            } else {
                messages.push('‚ùå Missing: You need a Sequence{} structure.');
            }
            
            if (userCode.includes('boundary') && userCode.includes('start')) {
                score += 20;
                messages.push('‚úÖ Great! You included a start boundary.');
            } else {
                messages.push('‚ùå Missing: You need a start boundary for the cemetery.');
            }
            
            if (userCode.includes('phase')) {
                score += 20;
                messages.push('‚úÖ Perfect! You included a Phase{} block.');
            } else {
                messages.push('‚ùå Missing: You need a Phase{} block for grouping the burials.');
            }
            
            if (userCode.includes('r_date') && (userCode.includes('suerc') || userCode.includes('brams'))) {
                score += 20;
                messages.push('‚úÖ Excellent! You included the Roman cemetery R_Date() commands.');
            } else {
                messages.push('‚ùå Missing: You need R_Date() commands for the Roman cemetery dates.');
            }
            
            if (userCode.includes('span') || (userCode.includes('end') && userCode.includes('boundary'))) {
                score += 20;
                messages.push('‚úÖ Nice work! You included end boundaries or span calculations.');
            } else {
                messages.push('‚ùå Consider: Adding an end boundary and Span() to calculate cemetery duration.');
            }
            
            // Show feedback
            feedback.innerHTML = `
                <h4>Your Score: ${score}/100</h4>
                ${messages.map(msg => `<p>${msg}</p>`).join('')}
                ${score >= 80 ? '<p><strong>üéâ Excellent work! You understand the key concepts.</strong></p>' : 
                  score >= 60 ? '<p><strong>üëç Good effort! Review the missing components.</strong></p>' : 
                  '<p><strong>üìö Keep practicing! Review the examples above.</strong></p>'}
            `;
            feedback.style.display = 'block';
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' && currentSection < totalSections - 1) {
                showSection(currentSection + 1);
            } else if (e.key === 'ArrowLeft' && currentSection > 0) {
                showSection(currentSection - 1);
            }
        });

        // Initialize
        showSection(0);
    </script>
</body>
</html>